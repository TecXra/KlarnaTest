{"version":3,"sources":["search_tires.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"search_tires.js","sourcesContent":["    function redirect(dimension, page) {\n        var redirect = \"\";\n        var dimension = typeof dimension == \"undefined\" || dimension == null ? '' : dimension;\n        var page = typeof page == \"undefined\" || page == null ? '' : page;\n        \n        if(productTypeID == 1) { redirect = '/sok/reg/sommardack?dimension='; }\n        if(productTypeID == 2) { redirect = '/sok/reg/friktionsdack?dimension='; }\n        if(productTypeID == 3) { redirect = '/sok/reg/dubbdack?dimension='; }\n        console.log(dimension, page);\n        if(dimension) {\n            redirect = redirect + dimension;\n        } \n\n        if(page) {\n            redirect = redirect + '&page=' + page;\n        }\n\n        if (history.pushState) {\n          window.history.pushState(\"\", \"\", redirect);\n        } else {\n          document.location.href = redirect;\n        }\n        return;\n    }\n\n    $(document).on('click', '.pagination a', function(e) {\n        e.preventDefault();\n        var url = $(this).attr('href');\n        var page = $(this).text();\n\n        var textSearch = $('#textSearch').val();\n        var dimension = $('.dimensions .active').data('dimension');\n        var brand = $(\".DDBrands\").val();\n        redirect(dimension, page);\n\n\n        $.ajax({\n            type: 'GET',\n            url: url, \n            data: {\n                textSearch: textSearch,\n                productTypeID: productTypeID,\n                dimension : dimension,\n                brand : brand\n            },\n            dataType: 'json',\n            xhrFields: {\n                withCredentials: true\n            },\n            success: function(data) {\n                $('#searchResult').remove();\n                $('.categoryFooter').remove();\n                $('#searchContainer div.col-sm-12').append(data.searchResult);\n\n                $('html, body').animate({scrollTop : 0},1000);\n            }\n        });\n    });\n\n    // $(document).ready(function() {\n    //     $(window).scroll(fetchPosts);\n\n    //     function fetchPosts() {\n    //         console.log('scroll1');\n\n    //         var page = $('.endless-pagination').data('next-page');\n\n    //         if(page !== null) {\n    //             console.log(page);\n    //             clearTimeout($.data( this, 'scrollCheck'));\n\n    //             $.data( this, 'scrollCheck', setTimeout(function() {\n    //                 var scroll_position_for_posts_load = $(window).height() + $(window).scrollTop() + 500;\n\n    //                 if(scroll_position_for_posts_load >= $(document).height()) {\n    //                     $.get(page, function(data) {\n    //                         $('#searchResult').append(data.searchResult);\n    //                         $('.endless-pagination').data('next-page', data.next_page);\n    //                     });\n    //                 }\n    //             }, 350));\n\n    //         }\n    //     } \n    // });\n    \n\n    $(document).on('click', '.selectSizes', function(e) {\n        e.preventDefault();\n        $(this).addClass('active').siblings().removeClass('active');\n\n        var textSearch = $('#textSearch').val();\n        var size = $(this).data('size');\n        var brand = $(\".DDBrands\").val();\n        // var dimension = $('.dimensions .active').data('dimension');\n        redirect();\n        \n\n        var url = 'searchSummerTiresByWidth';\n        if(productTypeID == 1) {\n            url = 'searchSummerTiresByWidth';\n        }\n        else if(productTypeID == 2) {\n            url = 'searchFriktionTiresByWidth';\n        }\n        else if(productTypeID == 3) {\n            url = 'searchStuddedTiresByWidth';\n        }\n        else if(productTypeID == 4) {\n            url = 'searchRimsByWidth';\n        }\n\n        $.ajax({\n            type: 'get',\n            url: url,\n            data: {\n                textSearch: textSearch,\n                size: size,\n                brand: brand,\n                page: 1,\n            },\n            dataType: 'json',\n            xhrFields: {\n                withCredentials: true\n            },\n            success: function(data) {\n                $('#searchResult').remove();\n                $('.selectDimensions').remove();\n                $('.categoryFooter').remove(); \n                $('#productCount').empty();\n                $('#productCount').html(data.productCount);\n                $('#searchContainer div.col-sm-12').append(data.searchResult);\n                $('.dimensions').append(data.dimensions);\n                \n            }\n        });\n    });\n\n\n    $(document).on('click', '.selectDimensions', function(e) {\n        e.preventDefault();\n        $(this).addClass('active').siblings().removeClass('active');\n\n        var textSearch = $('#textSearch').val();\n        var dimension = $(this).data('dimension');\n        redirect(dimension, 1);\n        var brand = $(\".DDBrands\").val();\n        // var size = $(\".selectedSize\").val();\n\n        var url = 'searchSummerTiresByDimension';\n        if(productTypeID == 1) {\n            url = 'searchSummerTiresByDimension';\n        }\n        else if(productTypeID == 2) {\n            url = 'searchFriktionTiresByDimension';\n        }\n        else if(productTypeID == 3) {\n            url = 'searchStuddedTiresByDimension';\n        }\n\n        $.ajax({\n            type: 'get',\n            url: url,\n            data: {\n                // size: size,\n                textSearch: textSearch,\n                dimension: dimension,\n                brand: brand,\n                page: 1\n            },\n            dataType: 'json',\n            xhrFields: {\n                withCredentials: true\n            },\n            success: function(data) {\n                $('#searchResult').remove();\n                $('.categoryFooter').remove(); \n                $('#productCount').empty();\n                $('#productCount').html(data.productCount);\n                $('#searchContainer div.col-sm-12').append(data.searchResult);\n            }\n        });\n    });\n\n\n    $(document).on('change', '.DDBrands', function() {\n\n        var textSearch = $('#textSearch').val();\n        var brand = $(this).val();\n        var dimension = $('.dimensions .active').data('dimension');\n        redirect(dimension, 1 );\n        \n\n        var url = 'searchSummerTiresByWidth';\n        if(productTypeID == 1) {\n            url = 'searchSummerTiresByWidth';\n        }\n        else if(productTypeID == 2) {\n            url = 'searchFriktionTiresByWidth';\n        }\n        else if(productTypeID == 3) {\n            url = 'searchStuddedTiresByWidth';\n        }\n        else if(productTypeID == 4) {\n            url = 'searchRimsByWidth';\n        }\n\n        $.ajax({\n            type: 'get',\n            url: url,\n            data: {\n                textSearch: textSearch,\n                brand: brand,\n                page: 1,\n            },\n            dataType: 'json',\n            xhrFields: {\n                withCredentials: true\n            },\n            success: function(data) {\n                $('#searchResult').remove();\n                $('.selectDimensions').remove();\n                $('.categoryFooter').remove(); \n                $('#productCount').empty();\n                $('#productCount').html(data.productCount);\n                $('#searchContainer div.col-sm-12').append(data.searchResult);\n                $('.dimensions').append(data.dimensions);\n                \n            }\n        });\n    });\n\n\n    $('.search-box').removeClass('hidden');\n\n    $(document).on('click', '.search-close', function(e) {\n        $('#textSearch').val('');\n        var textSearch = \"\";\n        var brand = $(\".DDBrands\").val();\n        var dimension = $('.dimensions .active').data('dimension');\n        redirect(dimension, 1 );\n        \n\n        var url = 'searchSummerTiresByWidth';\n        if(productTypeID == 1) {\n            url = 'searchSummerTiresByWidth';\n        }\n        else if(productTypeID == 2) {\n            url = 'searchFriktionTiresByWidth';\n        }\n        else if(productTypeID == 3) {\n            url = 'searchStuddedTiresByWidth';\n        }\n        else if(productTypeID == 4) {\n            url = 'searchRimsByWidth';\n        }\n\n        $.ajax({\n            type: 'get',\n            url: url,\n            data: {\n                textSearch: textSearch,\n                brand: brand,\n                page: 1,\n            },\n            dataType: 'json',\n            xhrFields: {\n                withCredentials: true\n            },\n            success: function(data) {\n                $('#searchResult').remove();\n                $('.selectDimensions').remove();\n                $('.categoryFooter').remove(); \n                $('#productCount').empty();\n                $('#productCount').html(data.productCount);\n                $('#searchContainer div.col-sm-12').append(data.searchResult);\n                $('.dimensions').append(data.dimensions);\n                \n            }\n        });\n    });\n\n   $(document).on('keyup', '#textSearch', function(e) {\n        e.preventDefault();\n\n        var textSearch = $('#textSearch').val();\n        var brand = $(\".DDBrands\").val();\n        var dimension = $('.dimensions .active').data('dimension');\n        redirect(dimension, 1 );\n        \n\n        var url = 'searchSummerTiresByWidth';\n        if(productTypeID == 1) {\n            url = 'searchSummerTiresByWidth';\n        }\n        else if(productTypeID == 2) {\n            url = 'searchFriktionTiresByWidth';\n        }\n        else if(productTypeID == 3) {\n            url = 'searchStuddedTiresByWidth';\n        }\n        else if(productTypeID == 4) {\n            url = 'searchRimsByWidth';\n        }\n\n        $.ajax({\n            type: 'get',\n            url: url,\n            data: {\n                textSearch: textSearch,\n                brand: brand,\n                page: 1,\n            },\n            dataType: 'json',\n            xhrFields: {\n                withCredentials: true\n            },\n            success: function(data) {\n                $('#searchResult').remove();\n                $('.selectDimensions').remove();\n                $('.categoryFooter').remove(); \n                $('#productCount').empty();\n                $('#productCount').html(data.productCount);\n                $('#searchContainer div.col-sm-12').append(data.searchResult);\n                $('.dimensions').append(data.dimensions);\n                \n            }\n        });\n    });\n"]}